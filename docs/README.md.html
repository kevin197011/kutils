<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Markdown Preview</title>
  <style>
    body {
  background: #181a1b;
  color: #e0e0e0;
  font-family: 'Fira Mono', 'Consolas', 'Menlo', 'monospace', 'SF Mono', monospace;
  margin: 0 auto;
  max-width: 800px;
  padding: 2em 1em;
  line-height: 1.7;
}
h1, h2, h3, h4, h5, h6 {
  color: #7fff00;
  font-family: inherit;
  border-bottom: 1px solid #222;
  margin-top: 2em;
  margin-bottom: 1em;
}
pre, code {
  background: #222;
  color: #7fff00;
  font-family: inherit;
  border-radius: 4px;
}
pre {
  padding: 1em;
  overflow-x: auto;
  margin: 1.5em 0;
}
code {
  padding: 0.2em 0.4em;
  font-size: 0.98em;
}
a {
  color: #00e0e0;
  text-decoration: underline;
}
blockquote {
  border-left: 4px solid #7fff00;
  margin: 1em 0;
  padding: 0.5em 1em;
  color: #b0ffb0;
  background: #202322;
}
table {
  border-collapse: collapse;
  width: 100%;
  margin: 1.5em 0;
}
th, td {
  border: 1px solid #333;
  padding: 0.5em 1em;
}
th {
  background: #222;
  color: #7fff00;
}
tr:nth-child(even) {
  background: #232323;
}

    .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight {
  color: #faf6e4;
  background-color: #122b3b;
}
.highlight .gl {
  color: #dee5e7;
  background-color: #4e5d62;
}
.highlight .gp {
  color: #a8e1fe;
  font-weight: bold;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #6c8b9f;
  font-style: italic;
}
.highlight .cp {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .err {
  color: #fefeec;
  background-color: #cc0000;
}
.highlight .gr {
  color: #cc0000;
  font-weight: bold;
  font-style: italic;
}
.highlight .k, .highlight .kd, .highlight .kv {
  color: #f6dd62;
  font-weight: bold;
}
.highlight .o, .highlight .ow {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .p, .highlight .pi {
  color: #4df4ff;
}
.highlight .gd {
  color: #cc0000;
}
.highlight .gi {
  color: #b2fd6d;
}
.highlight .ge {
  font-style: italic;
}
.highlight .ges {
  font-weight: bold;
  font-style: italic;
}
.highlight .gs {
  font-weight: bold;
}
.highlight .gt {
  color: #dee5e7;
  background-color: #4e5d62;
}
.highlight .kc {
  color: #f696db;
  font-weight: bold;
}
.highlight .kn {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kp {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kr {
  color: #ffb000;
  font-weight: bold;
}
.highlight .gh {
  color: #ffb000;
  font-weight: bold;
}
.highlight .gu {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kt {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .no {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nc {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nd {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nn {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .bp {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .ne {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nl {
  color: #ffb000;
  font-weight: bold;
}
.highlight .nt {
  color: #ffb000;
  font-weight: bold;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #f696db;
  font-weight: bold;
}
.highlight .ld {
  color: #f696db;
  font-weight: bold;
}
.highlight .ss {
  color: #f696db;
  font-weight: bold;
}
.highlight .s, .highlight .sb, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .sr, .highlight .s1 {
  color: #fff0a6;
  font-weight: bold;
}
.highlight .sa {
  color: #f6dd62;
  font-weight: bold;
}
.highlight .se {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .sc {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .si {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .nb {
  font-weight: bold;
}
.highlight .ni {
  color: #999999;
  font-weight: bold;
}
.highlight .w {
  color: #BBBBBB;
}
.highlight .go {
  color: #BBBBBB;
}
.highlight .nf, .highlight .fm {
  color: #a8e1fe;
}
.highlight .py {
  color: #a8e1fe;
}
.highlight .na {
  color: #a8e1fe;
}
.highlight .nv, .highlight .vc, .highlight .vg, .highlight .vi, .highlight .vm {
  color: #a8e1fe;
  font-weight: bold;
}
  </style>
</head>
<body>
  <h1 id="ruby-é€šç”¨å·¥å…·ç±»utilshelperåº“">Ruby é€šç”¨å·¥å…·ç±»ï¼ˆUtils/Helperï¼‰åº“</h1>

<blockquote>
  <p>æœ¬æ–‡æ¡£æ±‡æ€»äº† Ruby æ—¥å¸¸å¼€å‘ä¸­å¸¸ç”¨çš„å·¥å…·ç±»/æ¨¡å—ï¼Œä¾¿äºå¿«é€Ÿé›†æˆã€å¤ç”¨å’Œæ‰©å±•ã€‚</p>
</blockquote>

<hr />

<h2 id="ç›®å½•">ç›®å½•</h2>

<ol>
  <li><a href="#ç®€ä»‹">ç®€ä»‹</a></li>
  <li><a href="#å·¥å…·ç±»åˆ†ç±»ä¸ç¤ºä¾‹">å·¥å…·ç±»åˆ†ç±»ä¸ç¤ºä¾‹</a>
    <ul>
      <li><a href="#å­—ç¬¦ä¸²å¤„ç†stringutils">å­—ç¬¦ä¸²å¤„ç†ï¼ˆStringUtilsï¼‰</a></li>
      <li><a href="#æ—¶é—´å¤„ç†timeutils">æ—¶é—´å¤„ç†ï¼ˆTimeUtilsï¼‰</a></li>
      <li><a href="#æ–‡ä»¶ä¸è·¯å¾„å¤„ç†fileutils">æ–‡ä»¶ä¸è·¯å¾„å¤„ç†ï¼ˆFileUtilsï¼‰</a></li>
      <li><a href="#http-è¯·æ±‚httpclient">HTTP è¯·æ±‚ï¼ˆHttpClientï¼‰</a></li>
      <li><a href="#åŠ è§£å¯†ç­¾åcryptoutils">åŠ è§£å¯†/ç­¾åï¼ˆCryptoUtilsï¼‰</a></li>
      <li><a href="#æ•°ç»„hash-å·¥å…·arrayutils">æ•°ç»„/Hash å·¥å…·ï¼ˆArrayUtilsï¼‰</a></li>
      <li><a href="#éªŒè¯å·¥å…·validator">éªŒè¯å·¥å…·ï¼ˆValidatorï¼‰</a></li>
      <li><a href="#è°ƒè¯•æ—¥å¿—debugutils">è°ƒè¯•/æ—¥å¿—ï¼ˆDebugUtilsï¼‰</a></li>
      <li><a href="#dsl-æ”¯æŒdslbuilder">DSL æ”¯æŒï¼ˆDSLBuilderï¼‰</a></li>
      <li><a href="#æ ¼å¼åŒ–è¾“å‡ºformatutils">æ ¼å¼åŒ–è¾“å‡ºï¼ˆFormatUtilsï¼‰</a></li>
    </ul>
  </li>
  <li><a href="#é¡¹ç›®ç»“æ„å»ºè®®">é¡¹ç›®ç»“æ„å»ºè®®</a></li>
  <li><a href="#ç”¨æ³•ç¤ºä¾‹">ç”¨æ³•ç¤ºä¾‹</a></li>
  <li><a href="#æ‰©å±•å»ºè®®">æ‰©å±•å»ºè®®</a></li>
  <li><a href="#è®¸å¯è¯">è®¸å¯è¯</a></li>
</ol>

<hr />

<h2 id="ç®€ä»‹">ç®€ä»‹</h2>

<p>æœ¬åº“æ—¨åœ¨ä¸º Ruby é¡¹ç›®æä¾›ä¸€å¥—é«˜å¤ç”¨ã€æ˜“æ‰©å±•çš„é€šç”¨å·¥å…·ç±»ï¼Œæ¶µç›–å­—ç¬¦ä¸²ã€æ—¶é—´ã€æ–‡ä»¶ã€ç½‘ç»œã€åŠ å¯†ã€æ•°æ®ç»“æ„ã€éªŒè¯ã€è°ƒè¯•ã€DSLã€æ ¼å¼åŒ–ç­‰å¸¸è§åœºæ™¯ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p>

<hr />

<h2 id="å·¥å…·ç±»åˆ†ç±»ä¸ç¤ºä¾‹">å·¥å…·ç±»åˆ†ç±»ä¸ç¤ºä¾‹</h2>

<h3 id="1-å­—ç¬¦ä¸²å¤„ç†stringutils">1. å­—ç¬¦ä¸²å¤„ç†ï¼ˆStringUtilsï¼‰</h3>

<ul>
  <li>é©¼å³°/ä¸‹åˆ’çº¿/slug è½¬æ¢</li>
  <li>æ–‡æœ¬æ¸…æ´—ã€æ ¼å¼åŒ–</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">StringUtils</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">camelize</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="n">str</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s1">'_'</span><span class="p">).</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:capitalize</span><span class="p">).</span><span class="nf">join</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">underscore</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="n">str</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/::/</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">).</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/([A-Z]+)([A-Z][a-z])/</span><span class="p">,</span><span class="s1">'\\1_\\2'</span><span class="p">).</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/([a-z\d])([A-Z])/</span><span class="p">,</span><span class="s1">'\\1_\\2'</span><span class="p">).</span><span class="nf">tr</span><span class="p">(</span><span class="s2">"-"</span><span class="p">,</span> <span class="s2">"_"</span><span class="p">).</span><span class="nf">downcase</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">slugify</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="n">str</span><span class="p">.</span><span class="nf">downcase</span><span class="p">.</span><span class="nf">strip</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="s1">' '</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">).</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/[^\w-]/</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="2-æ—¶é—´å¤„ç†timeutils">2. æ—¶é—´å¤„ç†ï¼ˆTimeUtilsï¼‰</h3>

<ul>
  <li>ISO8601 æ ¼å¼åŒ–</li>
  <li>äººæ€§åŒ–æ—¶é—´é—´éš”</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">TimeUtils</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">now_iso8601</span>
    <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">utc</span><span class="p">.</span><span class="nf">iso8601</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">human_duration</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
    <span class="n">mm</span><span class="p">,</span> <span class="n">ss</span> <span class="o">=</span> <span class="n">seconds</span><span class="p">.</span><span class="nf">divmod</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
    <span class="n">hh</span><span class="p">,</span> <span class="n">mm</span> <span class="o">=</span> <span class="n">mm</span><span class="p">.</span><span class="nf">divmod</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
    <span class="s2">"%02d:%02d:%02d"</span> <span class="o">%</span> <span class="p">[</span><span class="n">hh</span><span class="p">,</span> <span class="n">mm</span><span class="p">,</span> <span class="n">ss</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="3-æ–‡ä»¶ä¸è·¯å¾„å¤„ç†fileutils">3. æ–‡ä»¶ä¸è·¯å¾„å¤„ç†ï¼ˆFileUtilsï¼‰</h3>

<ul>
  <li>å®‰å…¨è¯»å†™</li>
  <li>ç›®å½•åˆ›å»º</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">FileUtils</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">safe_read</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="no">File</span><span class="p">.</span><span class="nf">exist?</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">?</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">:</span> <span class="kp">nil</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">mkdir_p</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="no">Dir</span><span class="p">.</span><span class="nf">mkdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">unless</span> <span class="no">Dir</span><span class="p">.</span><span class="nf">exist?</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<blockquote>
  <p>ğŸ’¡ Ruby æ ‡å‡†åº“è‡ªå¸¦ <code>FileUtils</code>ï¼Œå¦‚æœ‰å†²çªå¯è‡ªå®šä¹‰å‘½åã€‚</p>
</blockquote>

<h3 id="4-http-è¯·æ±‚httpclient">4. HTTP è¯·æ±‚ï¼ˆHttpClientï¼‰</h3>

<ul>
  <li>ç®€åŒ– GET/POST è¯·æ±‚</li>
  <li>æ”¯æŒ JSON è§£æ</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="k">module</span> <span class="nn">HttpClient</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">get_json</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get_response</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
    <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="nf">body</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="5-åŠ è§£å¯†ç­¾åcryptoutils">5. åŠ è§£å¯†/ç­¾åï¼ˆCryptoUtilsï¼‰</h3>

<ul>
  <li>MD5ã€HMACã€Base64</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'digest'</span>
<span class="nb">require</span> <span class="s1">'base64'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="k">module</span> <span class="nn">CryptoUtils</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">md5</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="no">Digest</span><span class="o">::</span><span class="no">MD5</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">hmac_sha256</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
    <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="s2">"SHA256"</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">base64_encode</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
    <span class="no">Base64</span><span class="p">.</span><span class="nf">strict_encode64</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="6-æ•°ç»„hash-å·¥å…·arrayutils">6. æ•°ç»„/Hash å·¥å…·ï¼ˆArrayUtilsï¼‰</h3>

<ul>
  <li>æ·±åº¦æ‰å¹³åŒ–</li>
  <li>å®‰å…¨ map</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">ArrayUtils</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">deep_flatten</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
    <span class="n">arr</span><span class="p">.</span><span class="nf">flatten</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">while</span> <span class="n">arr</span><span class="p">.</span><span class="nf">any?</span> <span class="p">{</span> <span class="o">|</span><span class="n">a</span><span class="o">|</span> <span class="n">a</span><span class="p">.</span><span class="nf">is_a?</span><span class="p">(</span><span class="no">Array</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">arr</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">safe_map</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="p">(</span><span class="n">arr</span> <span class="o">||</span> <span class="p">[]).</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="7-éªŒè¯å·¥å…·validator">7. éªŒè¯å·¥å…·ï¼ˆValidatorï¼‰</h3>

<ul>
  <li>å¿…å¡«ã€é‚®ç®±æ ¼å¼æ ¡éªŒ</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Validator</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">required?</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="o">!</span><span class="n">val</span><span class="p">.</span><span class="nf">nil?</span> <span class="o">&amp;&amp;</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">''</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">email?</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="o">!!</span><span class="p">(</span><span class="n">val</span> <span class="o">=~</span> <span class="sr">/\A[^@\s]+@[^@\s]+\z/</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="8-è°ƒè¯•æ—¥å¿—debugutils">8. è°ƒè¯•/æ—¥å¿—ï¼ˆDebugUtilsï¼‰</h3>

<ul>
  <li>å¿«é€Ÿè°ƒè¯•æ‰“å°</li>
  <li>ç»“æ„åŒ–æ—¥å¿—è¾“å‡º</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">DebugUtils</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">log</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">"==== </span><span class="si">#{</span><span class="n">label</span> <span class="o">||</span> <span class="s1">'DEBUG'</span><span class="si">}</span><span class="s2"> ===="</span>
    <span class="n">pp</span> <span class="n">obj</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="9-dsl-æ”¯æŒdslbuilder">9. DSL æ”¯æŒï¼ˆDSLBuilderï¼‰</h3>

<ul>
  <li>å…ƒç¼–ç¨‹é…ç½®</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">DSLBuilder</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="nb">instance_eval</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">task</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">"Define task: </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">block</span><span class="p">.</span><span class="nf">call</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># ä½¿ç”¨ç¤ºä¾‹ï¼š</span>
<span class="c1"># DSLBuilder.new do</span>
<span class="c1">#   task "deploy" { puts "Deploying..." }</span>
<span class="c1"># end</span>
</code></pre></div></div>

<h3 id="10-æ ¼å¼åŒ–è¾“å‡ºformatutils">10. æ ¼å¼åŒ–è¾“å‡ºï¼ˆFormatUtilsï¼‰</h3>

<ul>
  <li>Markdown æ ‡é¢˜ã€å½©è‰²æ–‡æœ¬</li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">FormatUtils</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">markdown_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="s2">"# </span><span class="si">#{</span><span class="n">title</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">color_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
    <span class="s2">"</span><span class="se">\e</span><span class="s2">[</span><span class="si">#{</span><span class="n">color_code</span><span class="p">(</span><span class="n">color</span><span class="p">)</span><span class="si">}</span><span class="s2">m</span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="se">\e</span><span class="s2">[0m"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">color_code</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="p">{</span> <span class="ss">red: </span><span class="mi">31</span><span class="p">,</span> <span class="ss">green: </span><span class="mi">32</span><span class="p">,</span> <span class="ss">yellow: </span><span class="mi">33</span><span class="p">,</span> <span class="ss">blue: </span><span class="mi">34</span> <span class="p">}[</span><span class="n">color</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<hr />

<h2 id="é¡¹ç›®ç»“æ„å»ºè®®">é¡¹ç›®ç»“æ„å»ºè®®</h2>

<pre><code>lib/
  utils/
    string_utils.rb
    time_utils.rb
    file_utils.rb
    crypto_utils.rb
    array_utils.rb
    validator.rb
    http_client.rb
    debug_utils.rb
    format_utils.rb
</code></pre>

<ul>
  <li>ç»Ÿä¸€å‘½åç©ºé—´ï¼š<code>Utils::StringUtils.camelize(...)</code></li>
  <li>å¯é€šè¿‡ <code>include</code> æ··å…¥ç±»ä¸­</li>
  <li>æ¨èé…åˆ RSpec ç¼–å†™å•å…ƒæµ‹è¯•</li>
</ul>

<hr />

<h2 id="ç”¨æ³•ç¤ºä¾‹">ç”¨æ³•ç¤ºä¾‹</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require_relative</span> <span class="s1">'lib/utils/string_utils'</span>

<span class="nb">puts</span> <span class="no">Utils</span><span class="o">::</span><span class="no">StringUtils</span><span class="p">.</span><span class="nf">camelize</span><span class="p">(</span><span class="s1">'hello_world'</span><span class="p">)</span> <span class="c1"># =&gt; HelloWorld</span>
<span class="nb">puts</span> <span class="no">Utils</span><span class="o">::</span><span class="no">StringUtils</span><span class="p">.</span><span class="nf">slugify</span><span class="p">(</span><span class="s1">'Hello Ruby!'</span><span class="p">)</span>  <span class="c1"># =&gt; hello-ruby</span>

<span class="nb">require_relative</span> <span class="s1">'lib/utils/time_utils'</span>
<span class="nb">puts</span> <span class="no">Utils</span><span class="o">::</span><span class="no">TimeUtils</span><span class="p">.</span><span class="nf">now_iso8601</span>
<span class="nb">puts</span> <span class="no">Utils</span><span class="o">::</span><span class="no">TimeUtils</span><span class="p">.</span><span class="nf">human_duration</span><span class="p">(</span><span class="mi">3661</span><span class="p">)</span> <span class="c1"># =&gt; 01:01:01</span>
</code></pre></div></div>

<hr />

<h2 id="æ‰©å±•å»ºè®®">æ‰©å±•å»ºè®®</h2>

<ul>
  <li>å¯å°è£…ä¸º Gem å‘å¸ƒ</li>
  <li>æ”¯æŒè‡ªåŠ¨åŠ è½½ï¼ˆå¦‚ Zeitwerkï¼‰</li>
  <li>å¢åŠ æ›´å¤šå®ç”¨æ–¹æ³•å’Œç±»å‹æ‰©å±•</li>
  <li>é›†æˆ RuboCop è§„èŒƒå’Œ RSpec æµ‹è¯•</li>
  <li>æ”¯æŒ Ruby 2.7+ åŠæ›´é«˜ç‰ˆæœ¬</li>
</ul>

<hr />

<h2 id="è®¸å¯è¯">è®¸å¯è¯</h2>

<p>MIT License. Â© 2025 kk</p>

</body>
</html>
