<h1 id="kutils-用法示例">Kutils 用法示例</h1>

<ul id="markdown-toc">
  <li><a href="#kutils-用法示例" id="markdown-toc-kutils-用法示例">Kutils 用法示例</a>    <ul>
      <li><a href="#1-字符串处理-kutilsstringutils" id="markdown-toc-1-字符串处理-kutilsstringutils">1. 字符串处理 Kutils::StringUtils</a></li>
      <li><a href="#2-时间处理-kutilstimeutils" id="markdown-toc-2-时间处理-kutilstimeutils">2. 时间处理 Kutils::TimeUtils</a></li>
      <li><a href="#3-文件与路径处理-kutilsfileutils" id="markdown-toc-3-文件与路径处理-kutilsfileutils">3. 文件与路径处理 Kutils::FileUtils</a></li>
      <li><a href="#4-加解密签名-kutilscryptoutils" id="markdown-toc-4-加解密签名-kutilscryptoutils">4. 加解密/签名 Kutils::CryptoUtils</a></li>
      <li><a href="#5-数组hash-工具-kutilsarrayutils" id="markdown-toc-5-数组hash-工具-kutilsarrayutils">5. 数组/Hash 工具 Kutils::ArrayUtils</a></li>
      <li><a href="#6-验证工具-kutilsvalidator" id="markdown-toc-6-验证工具-kutilsvalidator">6. 验证工具 Kutils::Validator</a></li>
      <li><a href="#7-调试日志-kutilsdebugutils" id="markdown-toc-7-调试日志-kutilsdebugutils">7. 调试/日志 Kutils::DebugUtils</a></li>
      <li><a href="#8-dsl-支持-kutilsdslbuilder" id="markdown-toc-8-dsl-支持-kutilsdslbuilder">8. DSL 支持 Kutils::DSLBuilder</a></li>
      <li><a href="#9-格式化输出-kutilsformatutils" id="markdown-toc-9-格式化输出-kutilsformatutils">9. 格式化输出 Kutils::FormatUtils</a></li>
      <li><a href="#10-版本号" id="markdown-toc-10-版本号">10. 版本号</a></li>
    </ul>
  </li>
</ul>

<p>本文件展示 Kutils 各工具模块的典型用法，便于开发者快速集成与测试。</p>

<hr />

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'kutils'</span>
</code></pre></div></div>

<h2 id="1-字符串处理-kutilsstringutils">1. 字符串处理 Kutils::StringUtils</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">StringUtils</span><span class="p">.</span><span class="nf">camelize</span><span class="p">(</span><span class="s1">'hello_world'</span><span class="p">)</span> <span class="c1"># =&gt; HelloWorld</span>
<span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">StringUtils</span><span class="p">.</span><span class="nf">underscore</span><span class="p">(</span><span class="s1">'HelloWorld'</span><span class="p">)</span> <span class="c1"># =&gt; hello_world</span>
<span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">StringUtils</span><span class="p">.</span><span class="nf">slugify</span><span class="p">(</span><span class="s1">'Hello Ruby!'</span><span class="p">)</span>   <span class="c1"># =&gt; hello-ruby</span>
</code></pre></div></div>

<h2 id="2-时间处理-kutilstimeutils">2. 时间处理 Kutils::TimeUtils</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">TimeUtils</span><span class="p">.</span><span class="nf">now_iso8601</span> <span class="c1"># =&gt; 2025-01-01T12:00:00Z</span>
<span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">TimeUtils</span><span class="p">.</span><span class="nf">human_duration</span><span class="p">(</span><span class="mi">3661</span><span class="p">)</span> <span class="c1"># =&gt; 01:01:01</span>
</code></pre></div></div>

<h2 id="3-文件与路径处理-kutilsfileutils">3. 文件与路径处理 Kutils::FileUtils</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">File</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s1">'foo.txt'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">FileUtils</span><span class="p">.</span><span class="nf">safe_read</span><span class="p">(</span><span class="s1">'foo.txt'</span><span class="p">)</span> <span class="c1"># =&gt; bar</span>
<span class="no">Kutils</span><span class="o">::</span><span class="no">FileUtils</span><span class="p">.</span><span class="nf">mkdir_p</span><span class="p">(</span><span class="s1">'tmp/data'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="4-加解密签名-kutilscryptoutils">4. 加解密/签名 Kutils::CryptoUtils</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">CryptoUtils</span><span class="p">.</span><span class="nf">md5</span><span class="p">(</span><span class="s1">'abc'</span><span class="p">)</span> <span class="c1"># =&gt; 900150983cd24fb0d6963f7d28e17f72</span>
<span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">CryptoUtils</span><span class="p">.</span><span class="nf">hmac_sha256</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="s1">'key'</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">CryptoUtils</span><span class="p">.</span><span class="nf">base64_encode</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">)</span> <span class="c1"># =&gt; aGVsbG8=</span>
</code></pre></div></div>

<h2 id="5-数组hash-工具-kutilsarrayutils">5. 数组/Hash 工具 Kutils::ArrayUtils</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">ArrayUtils</span><span class="p">.</span><span class="nf">deep_flatten</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="mi">4</span><span class="p">]).</span><span class="nf">inspect</span> <span class="c1"># =&gt; [1, 2, [3], 4]</span>
<span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">ArrayUtils</span><span class="p">.</span><span class="nf">safe_map</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">}</span> <span class="c1"># =&gt; [2, 4]</span>
</code></pre></div></div>

<h2 id="6-验证工具-kutilsvalidator">6. 验证工具 Kutils::Validator</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">Validator</span><span class="p">.</span><span class="nf">required?</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span> <span class="c1"># =&gt; true</span>
<span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">Validator</span><span class="p">.</span><span class="nf">email?</span><span class="p">(</span><span class="s1">'foo@bar.com'</span><span class="p">)</span> <span class="c1"># =&gt; true</span>
</code></pre></div></div>

<h2 id="7-调试日志-kutilsdebugutils">7. 调试/日志 Kutils::DebugUtils</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Kutils</span><span class="o">::</span><span class="no">DebugUtils</span><span class="p">.</span><span class="nf">log</span><span class="p">({</span><span class="ss">foo: </span><span class="mi">1</span><span class="p">},</span> <span class="s1">'test'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="8-dsl-支持-kutilsdslbuilder">8. DSL 支持 Kutils::DSLBuilder</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Kutils</span><span class="o">::</span><span class="no">DSLBuilder</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span>
  <span class="n">task</span><span class="p">(</span><span class="s1">'deploy'</span><span class="p">)</span> <span class="p">{</span> <span class="nb">puts</span> <span class="s1">'Deploying...'</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="9-格式化输出-kutilsformatutils">9. 格式化输出 Kutils::FormatUtils</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">FormatUtils</span><span class="p">.</span><span class="nf">markdown_title</span><span class="p">(</span><span class="s1">'Hello'</span><span class="p">)</span> <span class="c1"># =&gt; "# Hello\n\n"</span>
<span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">FormatUtils</span><span class="p">.</span><span class="nf">color_text</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="ss">:red</span><span class="p">)</span> <span class="c1"># =&gt; 带红色的 foo</span>
</code></pre></div></div>

<h2 id="10-版本号">10. 版本号</h2>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">puts</span> <span class="no">Kutils</span><span class="o">::</span><span class="no">VERSION</span> <span class="c1"># =&gt; "0.1.0"</span>
</code></pre></div></div>
